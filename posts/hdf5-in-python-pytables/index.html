<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    HDF5 in Python: PyTables // Post It!
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Brunetto Ziosi">

  <meta property="og:title" content="HDF5 in Python: PyTables" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://brunettoziosi.eu/posts/hdf5-in-python-pytables/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://brunettoziosi.eu/css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.svg">

  
  

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>

  
</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

    <h1 class="brand-title">Post It!</h1>
    <h2 class="brand-tagline">Sticky digital notes
    </br>stuck on the Web!üòÉ</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://brunettoziosi.eu">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/posts">Blog</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://brunettoziosi.eu/cv">CV</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/pages">Pages</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="http://www.facebook.com/brunettoziosi" target="_blank"><i class='fab fa-facebook-f'></i></a>
        
      
        
        <a href="http://www.github.com/brunetto" target="_blank"><i class='fab fa-github'></i></a>
        
      
        
        <a href="http://plus.google.com/&#43;BrunettoZiosi" target="_blank"><i class='fab fa-google-plus-g'></i></a>
        
      
        
        <a href="https://instagram.com/elbrunz/" target="_blank"><i class='fab fa-instagram'></i></a>
        
      
        
        <a href="http://www.linkedin.com/in/brunettoziosi" target="_blank"><i class='fab fa-linkedin-in'></i></a>
        
      
        
        <a href="http://www.twitter.com/brunettoziosi" target="_blank"><i class='fab fa-twitter'></i></a>
        
      
      
    </div>
    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/posts/hdf5-in-python-pytables/">HDF5 in Python: PyTables</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>25</sup></span><span class="post-date-separator">/</span><span class="post-date-month">May</span> <span class="post-date-year">2012</span>
            	</span>
            	
            
            
            
            
            	
            		<span class="post-author-single">By <a class="post-author" href="http://brunettoziosi.eu" target="">Brunetto Ziosi</a></span>
            		




            	
            
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-python" href="http://brunettoziosi.eu/categories/python">Python</a>
				
					<a class="post-category post-category-programming" href="http://brunettoziosi.eu/categories/programming">Programming</a>
				
					<a class="post-category post-category-research" href="http://brunettoziosi.eu/categories/research">Research</a>
				
					<a class="post-category post-category-post" href="http://brunettoziosi.eu/categories/post">Post</a>
				
				</div>
			

			
		    	<div class="social-sharing">
	<a class="share-button-facebook" onClick="return popupShare(this.href);" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f" target="_blank"><i class="fab fa-facebook-f"><span>Like</span></i></a>
	<a class="share-button-google-plus" onClick="return popupShare(this.href);" href="https://plus.google.com/share?url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f" target="_blank"><i class="fab fa-google-plus-g"><span>Google +1</span></i></a>
	<a class="share-button-linkedin" onClick="return popupShare(this.href);" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f&title=HDF5%20in%20Python%3a%20PyTables&summary=HDF5%20is%20a%20wonderful%20file%20format%20you%20can%20use%20to%20put%20into%20tons%20of%20data%20with%20easy%2c%20without%20the%20need%20to%20think%20about%20endianess%2c%20binary%20formats%20and%20so%20on.%0aPytables%20is%20an%20extremely%20optimized%20library%20built%20on%20top%20of%20HDF5%20capabilities%20to%20make%20even%20simpler%20the%20use%20of%20this%20type%20of%20file.%0aIt%26rsquo%3bs%20also%20possible%20to%20navigate%20into%20a%20file%20graphically%20with%20ViTables.%0aHere%20I%20would%20like%20to%20present%20some%20of%20the%20features%20I%20use%20more%20often.}&source=Post%20It%21" target="_blank"><i class="fab fa-linkedin-in"><span>Share on LinkedIn</span></i></a>
	<a class="share-button-twitter" onClick="return popupShare(this.href);" href="http://twitter.com/share?text=HDF5%20in%20Python%3a%20PyTables&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f" target="_blank"><i class="fab fa-twitter"><span>Tweet</span></i></a>	
</div>
		    

			

            <p><a href="http://www.hdfgroup.org/HDF5/" target="_blank" title="HDF5 Group homepage">HDF5</a> is a wonderful file format you can use to put into tons of data with easy, without the need to think about endianess, binary formats and so on.<br />
Pytables is an extremely optimized library built on top of HDF5 capabilities to make even simpler the use of this type of file.<br />
It&rsquo;s also possible to navigate into a file graphically with <a href="http://vitables.org/" target="_blank" title="ViTables homepage">ViTables</a>.<br />
Here I would like to present some of the features I use more often.<br />
<!--TEASER_END--><br />
Open, flush and close a file</p>

<pre><code class="language-python">import tables as tb

h5 = tb.openfile(&quot;filename.h5&quot;, 'r')
...
h5.flush()
h5.close()
</code></pre>

<p>where <code>'r'</code> means &ldquo;open the file in read-only mode&rdquo;. It&rsquo;s also possible to open it as <code>'w'</code> (create a new file: it overwrites the file if it still exists) and <code>'a'</code> (append: create if it does not exist, if it exists, read and modify it).</p>

<p>Create a group to contain some data</p>

<pre><code class="language-python">group = h5.createGroup(h5.root, &quot;group&quot;)
</code></pre>

<p>where <code>h5.root</code> is the location of the new object created (where we want to create the group) and can also be passe as string (&ldquo;/&rdquo;) and <code>&quot;group&quot;</code> is the string with the name.</p>

<p>Store an array</p>

<pre><code class="language-python">a = np.array([....])
array = h5.createArray(h5.root.group, 'name', array_to_store, 'title')
array = h5.createArray(&quot;/group&quot;, 'name', array_to_store, 'title')
</code></pre>

<p>Create a table (from <a href="create-recreate-and-remove-duplicates-in-array-manipulation-obviously-in-python.html">Create, recreate and remove duplicates in array manipulation, obviously in Python!:)</a> or <a href="from-csv-to-hdf5-in-python.html">From .csv to HDF5 in Python</a></p>

<pre><code class="language-python">f = open(&quot;filename.csv&quot;, 'r')
line = f.readline()
values = np.genfromtxt(StringIO(line), dtype=([('column_1', 'i8'), ('column_2', 'f4'), ('column_3', 'f4')]), delimiter=',')
values.shape = 1

# or in an equivalent way, if the file dimensions permit to lad the entire file:
# values = np.genfromtxt(&quot;filename.csv&quot;, dtype=([('column_1', 'i8'), ('column_2', 'f4'), ('column_3', # 'f4')]), delimiter=',')

h5 = tb.openFile('filename.h5', 'w')
table = h5.createTable(h5.root, description=values, name='table_name', title=&quot;table_description&quot;, expectedrows=12158536)
table.flush()

for line in f:
	values = np.genfromtxt(StringIO(line), dtype=([('column_1', 'i8'), ('column_2', 'f4'), ('column_3', 'f4')]), delimiter=',')
	values.shape = 1
	table.append(values)
	
table.flush()
h5.flush()
h5.close()
f.close()
</code></pre>

<p>It&rsquo;s also possible to walk all the nodes under a group:</p>

<pre><code class="language-python">for i in h5.walkNodes(h5.root.group):
	print i
</code></pre>

<p>and to delete a node/array/table:</p>

<pre><code class="language-python">h5.removeNode(h5.root.group, 'name')
</code></pre>

<p>All the nodes are available through their path:</p>

<pre><code class="language-python">h5.getNode(&quot;/group&quot;, &quot;name&quot;)
h5.root.group.name
</code></pre>

<p>to read a table or an array, you can use the function <code>read()</code></p>

<pre><code class="language-python">h5.getNode(&quot;/group&quot;, &quot;name&quot;).read()
h5.root.group.name.read()
</code></pre>

	
			
		    	<div class="social-sharing">
	<a class="share-button-facebook" onClick="return popupShare(this.href);" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f" target="_blank"><i class="fab fa-facebook-f"><span>Like</span></i></a>
	<a class="share-button-google-plus" onClick="return popupShare(this.href);" href="https://plus.google.com/share?url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f" target="_blank"><i class="fab fa-google-plus-g"><span>Google +1</span></i></a>
	<a class="share-button-linkedin" onClick="return popupShare(this.href);" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f&title=HDF5%20in%20Python%3a%20PyTables&summary=HDF5%20is%20a%20wonderful%20file%20format%20you%20can%20use%20to%20put%20into%20tons%20of%20data%20with%20easy%2c%20without%20the%20need%20to%20think%20about%20endianess%2c%20binary%20formats%20and%20so%20on.%0aPytables%20is%20an%20extremely%20optimized%20library%20built%20on%20top%20of%20HDF5%20capabilities%20to%20make%20even%20simpler%20the%20use%20of%20this%20type%20of%20file.%0aIt%26rsquo%3bs%20also%20possible%20to%20navigate%20into%20a%20file%20graphically%20with%20ViTables.%0aHere%20I%20would%20like%20to%20present%20some%20of%20the%20features%20I%20use%20more%20often.}&source=Post%20It%21" target="_blank"><i class="fab fa-linkedin-in"><span>Share on LinkedIn</span></i></a>
	<a class="share-button-twitter" onClick="return popupShare(this.href);" href="http://twitter.com/share?text=HDF5%20in%20Python%3a%20PyTables&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fhdf5-in-python-pytables%2f" target="_blank"><i class="fab fa-twitter"><span>Tweet</span></i></a>	
</div>
		    

			
				<div class="tags-list">
					<span class="dark-red">Tags</span><span class="decorative-marker">//</span>
					
	                <a class="post-tag post-tag-python" href="http://brunettoziosi.eu/tags/python">python</a>,
	                
	                <a class="post-tag post-tag-programming" href="http://brunettoziosi.eu/tags/programming">programming</a>,
	                
	                <a class="post-tag post-tag-simulations" href="http://brunettoziosi.eu/tags/simulations">simulations</a>,
	                
	                <a class="post-tag post-tag-hdf5" href="http://brunettoziosi.eu/tags/hdf5">hdf5</a>,
	                
				</div>
			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/posts/essential-guide-to-binning/">Essential guide to binning</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/posts/learning-not-to-hate-c-things-worth-nothing/">Learning not to hate C: things worth nothing</a>
		            </div>
		            
	            </div>
            
          </section>
          

          	<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = "brunettoziosieu";   
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>
	<p>&copy; 2018 
	<a href="https://plus.google.com/117554238100031566866?rel=author">Brunetto Ziosi</a>. All rights reserved. </br>
	Theme by <a href="https://github.com/tmaiaroto/hugo-redlounge">Tom Maiaroto</a>, Generated (with ‚ù§) using <a href="http://gohugo.io/">Hugo.</a></p>
</div>

    </div>
  </div>
	

	
		<script type="text/javascript">
			function popupShare(url) {
				window.open(url, '_blank', 'scrollbars,resizable,height=525,width=600');
				return false;
			}
		</script>
	

  
  <script src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>
    <script type="text/javascript">
    
    MathJax.Hub.Config({
      tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
      }
    });
    MathJax.Hub.Queue(function() {
      $(MathJax.Hub.getAllJax()).map(function(index, elem) {
        return(elem.SourceElement());
      }).parent().addClass('has-jax');
    });
    MathJax.Hub.Configured();
    </script>
</body>
</html>
