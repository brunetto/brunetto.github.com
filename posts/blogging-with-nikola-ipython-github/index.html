<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    Blogging with Nikola &#43; Ipython &#43; Git(Hub) // Post It!
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Brunetto Ziosi">

  <meta property="og:title" content="Blogging with Nikola &#43; Ipython &#43; Git(Hub)" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://brunettoziosi.eu/posts/blogging-with-nikola-ipython-github/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://brunettoziosi.eu/css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Post It!" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

    <h1 class="brand-title">Post It!</h1>
    <h2 class="brand-tagline">Sticky digital notes stuck on the Web!ðŸ˜ƒ</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://brunettoziosi.eu">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/posts/">Blog</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/pages/curriculum-vitae/">CV</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/pages/">Pages</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="http://www.twitter.com/brunettoziosi" target="_blank"><i class='fa fa-twitter'></i></a>
        
      
        
        <a href="http://plus.google.com/&#43;BrunettoZiosi" target="_blank"><i class='fa fa-google-plus'></i></a>
        
      
        
        <a href="http://www.linkedin.com/in/brunettoziosi" target="_blank"><i class='fa fa-linkedin'></i></a>
        
      
        
        <a href="http://www.github.com/brunetto" target="_blank"><i class='fa fa-github'></i></a>
        
      
        
        <a href="http://www.facebook.com/brunettoziosi" target="_blank"><i class='fa fa-facebook'></i></a>
        
      
      
    </div>
    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
		    <div id="toc" class="pure-u-1 pure-u-md-1-4">
				<small class="toc-label">Contents</small>
		   	 	<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#nikola:db662b76ece852b487e671b4f249fd54">Nikola</a></li>
<li><a href="#github:db662b76ece852b487e671b4f249fd54">GitHub</a></li>
<li><a href="#google-authorship:db662b76ece852b487e671b4f249fd54">Google Authorship</a></li>
<li><a href="#cname-and-personal-domain:db662b76ece852b487e671b4f249fd54">CNAME and personal domain</a></li>
</ul></li>
</ul>
</nav>
		    </div>
		    
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/posts/blogging-with-nikola-ipython-github/">Blogging with Nikola &#43; Ipython &#43; Git(Hub)</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>18</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Aug</span> <span class="post-date-year">2013</span>
            	</span>
            	
            
            	
            		<span class="post-author-single">By <a class="post-author" href="http://brunettoziosi.eu" target="">Brunetto Ziosi</a></span>
            		




            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-programming" href="http://brunettoziosi.eu/categories/programming">Programming</a>
				
					<a class="post-category post-category-blogging" href="http://brunettoziosi.eu/categories/blogging">Blogging</a>
				
					<a class="post-category post-category-post" href="http://brunettoziosi.eu/categories/post">Post</a>
				
				</div>
			

			
		    	<div class="social-sharing">
	<a class="share-button-facebook" onClick="return popupShare(this.href);" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f" target="_blank"><i class="fa fa-facebook"><span>Like</span></i></a>
	<a class="share-button-google-plus" onClick="return popupShare(this.href);" href="https://plus.google.com/share?url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f" target="_blank"><i class="fa fa-google-plus"><span>Google +1</span></i></a>
	<a class="share-button-linkedin" onClick="return popupShare(this.href);" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f&title=Blogging%20with%20Nikola%20%2b%20Ipython%20%2b%20Git%28Hub%29&summary=%3cp%3eAfter%20a%20lot%20of%20different%20attempts%20now%20it%20seems%20that%20I%26rsquo%3bm%20able%20to%20run%20a%20static%0ablog%20with%20Python%2c%20Nikola%20and%20Git.%3c%2fp%3e%0a}&source=Post%20It%21" target="_blank"><i class="fa fa-linkedin"><span>Share on LinkedIn</span></i></a>
	<a class="share-button-twitter" onClick="return popupShare(this.href);" href="http://twitter.com/share?text=Blogging%20with%20Nikola%20%2b%20Ipython%20%2b%20Git%28Hub%29&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f" target="_blank"><i class="fa fa-twitter"><span>Tweet</span></i></a>	
</div>
		    

			

            

<p>After a lot of different attempts now it seems that I&rsquo;m able to run a static
blog with Python, Nikola and Git.</p>

<p>The information are taken from:<br />
<ul>
<li> <a href="http://www.damian.oquanta.info/posts/ipython-plugin-for-nikola-updated.html">http://www.damian.oquanta.info/posts/ipython-plugin-for-nikola-updated.html</a></li>
<li> <a href="http://diegoduncan21.github.io/posts/asi-lo-hice.html">http://diegoduncan21.github.io/posts/asi-lo-hice.html</a></li>
<li> <a href="https://github.com/yeoman/yeoman/wiki/Deployment">https://github.com/yeoman/yeoman/wiki/Deployment</a></li>
<li> <a href="http://stackoverflow.com/questions/12644855/how-do-i-reset-a-heroku-git-repository-to-its-initial-state">http://stackoverflow.com/questions/12644855/how-do-i-reset-a-heroku-git-repository-to-its-initial-state</a></li>
<li> <a href="http://cogumbreiro.blogspot.it/2013/05/how-to-install-git-subtree-in-ubuntu.html">http://cogumbreiro.blogspot.it/2013/05/how-to-install-git-subtree-in-ubuntu.html</a></li>
</ul></p>

<h2 id="nikola:db662b76ece852b487e671b4f249fd54">Nikola</h2>

<ul>
<li>first of all install some prerequisites:</li>
</ul>

<pre><code class="language-bash">sudo aptitude install python-virtualenv virtualenvwrapper libxml2-dev libxslt-dev
</code></pre>

<ul>
<li>export the environment path adding this line to <code>~/.bashrc</code>:</li>
</ul>

<pre><code class="language-bash">export WORKON_HOME=~/Envs
</code></pre>

<p>now the virtualenv are located in ~/Envs (you can choose another folder, of course)</p>

<ul>
<li>then create a virtualenv for the blog:</li>
</ul>

<pre><code class="language-bash">mkvirtualenv -p /usr/bin/python nblog
</code></pre>

<ul>
<li><p>enter the virtualenv with <code>workon nblog</code></p></li>

<li><p>run</p></li>
</ul>

<pre><code class="language-bash">pip install nikola pyzmq tornado jinja2 requests sphinx markdown
</code></pre>

<ul>
<li>from the folder that will be the blog parent folder run</li>
</ul>

<pre><code class="language-bash">nikola init myblog
</code></pre>

<ul>
<li>list the themes and install a theme containing &ldquo;ipython&rdquo; into it</li>
</ul>

<pre><code class="language-bash">nikola install_theme -l to list all the available themes in Nikola
nikola install_theme jinja-site-ipython 
</code></pre>

<ul>
<li>modify your conf.py file adding the following lines to your <code>post_pages</code>:</li>
</ul>

<pre><code class="language-python">(&quot;posts/*.ipynb&quot;, &quot;posts&quot;, &quot;post.tmpl&quot;, True), (&quot;stories/*.ipynb&quot;, &quot;stories&quot;, &quot;story.tmpl&quot;, False),
</code></pre>

<p>and make explicit to use the IPython theme:</p>

<pre><code class="language-python">THEME = 'jinja-site-ipython'
</code></pre>

<ul>
<li><p>choose some options in the configuration file (your name, your blog name, if to gzip the files,
add the search box, the disqus comments, if to use teasers and so on)</p></li>

<li><p>to write a new post, just:</p></li>
</ul>

<pre><code class="language-bash">nikola new_post -f ipynb
</code></pre>

<p>or <code>-f markdown</code> to use the markdown syntax</p>

<ul>
<li>then, <code>nikola build</code> to build the site and <code>nikola serve</code> to see it
locally at <a href="localhost:8000"><code>localhost:8000</code></a></li>
</ul>

<h2 id="github:db662b76ece852b487e671b4f249fd54">GitHub</h2>

<p>Now we want to deploy the blog on the blogging platform GitHub Pages.
To do this you need a <a href="https://github.com/">GitHub</a> account.<br />
Then</p>

<ul>
<li><p>create a repository named <code>youname.github.com</code></p></li>

<li><p>install git locally and (if on Ubuntu 13.04) activate <code>git subtree</code> with</p></li>
</ul>

<pre><code class="language-bash">sudo chmod +x /usr/share/doc/git/contrib/subtree/git-subtree.sh
sudo ln -s /usr/share/doc/git/contrib/subtree/git-subtree.sh /usr/lib/git-core/git-subtree
</code></pre>

<p>if you are on an older Ubuntu version you can do <a href="http://www.betaful.com/2011/01/i-love-git-subtree/">this</a>:</p>

<pre><code class="language-bash">git clone https://github.com/apenwarr/git-subtree.git
cd git-subtree
sudo bash ./install.sh 
# all this does is copies a file to your git folder, i.e. /usr/lib/git-core
</code></pre>

<ul>
<li><p>&ldquo;git init&rdquo; you blog with <code>git init</code> inside the main blog folder</p></li>

<li><p>set the remote origin locally with</p></li>
</ul>

<pre><code class="language-bash">git remote add origin ssh://git@github.com/yourname/yourname.github.com.git    
</code></pre>

<p>I use ssh because I can log in without a password saving my key at
<a href="https://github.com/settings/ssh">https://github.com/settings/ssh</a></p>

<ul>
<li>create an empty commit</li>
</ul>

<pre><code class="language-bash">git commit --allow-empty -am &quot;first commit&quot;
</code></pre>

<ul>
<li>now create the branch that will contain all the blog and move to it</li>
</ul>

<pre><code class="language-bash">git branch AllBlog
git checkout AllBlog
git branch --set-upstream AllBlog origin/AllBlog
</code></pre>

<p>the last passage is taken from <a href="http://stackoverflow.com/questions/13886042/git-branches-tracking-upstream">here</a></p>

<ul>
<li>add, commit and push the blog</li>
</ul>

<pre><code class="language-bash">git add ./*
git commit -am &quot;first import&quot;
git push origin master
</code></pre>

<ul>
<li>now you need to force the push of the files contained in the output folder to the master branch
in order to make the blog visible</li>
</ul>

<pre><code class="language-bash">git push origin `git subtree split --prefix output/ master`:master --force
</code></pre>

<ul>
<li>once you have done you can configure nikola to deploy the blog automatically
modifying the deploy option in <code>conf.py</code></li>
</ul>

<pre><code class="language-python">DEPLOY_COMMANDS = [&quot;git checkout AllBlog&quot;,
				   &quot;git add ./*&quot;,
				   &quot;git commit -a&quot;,
				   &quot;git push origin AllBlog&quot;,
				   &quot;git subtree push --prefix output/ origin master&quot;]
</code></pre>

<ul>
<li>now your workflow should be</li>
</ul>

<pre><code class="language-bash">nikola new_post -f ipynb
nikola build
nikola serve # optionally to check the output locally
nikola deploy
</code></pre>

<h2 id="google-authorship:db662b76ece852b487e671b4f249fd54">Google Authorship</h2>

<p>It&rsquo;s possible to let Google recognize and connect your contribution to the blog,
that is, the posts will appear with your G+ profile photos and some information in the search results.</p>

<p>Following</p>

<ul>
<li><a href="https://support.google.com/webmasters/answer/1408986?expand=option2">Author information in search results</a></li>
<li><a href="http://www.google.com/webmasters/tools/richsnippets">Structured Data Testing Tool</a></li>
</ul>

<p>the only thing you need to do is to insert the line <code>&lt;a href=&quot;[profile_url]?rel=author&quot;&gt;Google&lt;/a&gt;</code>
in the index.html file, for example inserting it in the <code>CONTENT_FOOTER =</code> string,
using your G+ profile link instead of <code>[profile_url]</code>.</p>

<p>If you own a Google+ page you can also link your site using</p>

<pre><code class="language-python">EXTRA_HEAD_DATA = '&lt;link href=&quot;https://plus.google.com/&lt;your page id&gt;&quot; rel=&quot;publisher&quot; /&gt;'
</code></pre>

<p>key in the <code>conf.py</code> configuration file.<br />
If you need some more html configuration you can add them there or you can copy the
template folder from the parent theme folder to your theme and modify the template index.html.</p>

<p>See also</p>

<ul>
<li><a href="https://support.google.com/webmasters/answer/1708844?hl=en">How to link a Google+ page to your website</a></li>
<li><a href="https://support.google.com/plus/answer/1711199?hl=en">Google Direct Connect</a></li>
<li><a href="https://support.google.com/plus/contact/page_verification">Google+ page verification</a></li>
</ul>

<h2 id="cname-and-personal-domain:db662b76ece852b487e671b4f249fd54">CNAME and personal domain</h2>

<p>If you have a personal domain you can let github serve that domain.
In brief, following <a href="http://blog.sathomas.me/post/custom-domains-with-github-pages">this post</a>
you have to put in the output folder a file named <code>CNAME</code> containing your domain name and to
create a DNS record on your domain host without</p>

<pre><code>@ 204.232.175.78 A
</code></pre>

<p>where 204.232.175.78 is GitHub ip4 and <code>A</code> is the type of the record (address).
You can also create a record for the <code>www</code> version of your domain resambling</p>

<pre><code>www yourname.github.com CNAME
</code></pre>

<p>and wait for the information to propagate (1 hour to 3 days).<br />
Note that the output folder can be deleted so it&rsquo;s better to create the <code>CNAME</code> file
in the main or <code>files</code> directory and to copy or &ldquo;<code>rsync</code>&rdquo; it within the <code>nikola deploy</code>
command workflow.</p>

<p>If you use Tophost and want both the <code>www</code> and the <code>non-www</code> version of your site
available, follow <a href="http://www.tophost.it/aiuto/cat2/11/199/">this post</a>.</p>

	
			
		    	<div class="social-sharing">
	<a class="share-button-facebook" onClick="return popupShare(this.href);" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f" target="_blank"><i class="fa fa-facebook"><span>Like</span></i></a>
	<a class="share-button-google-plus" onClick="return popupShare(this.href);" href="https://plus.google.com/share?url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f" target="_blank"><i class="fa fa-google-plus"><span>Google +1</span></i></a>
	<a class="share-button-linkedin" onClick="return popupShare(this.href);" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f&title=Blogging%20with%20Nikola%20%2b%20Ipython%20%2b%20Git%28Hub%29&summary=%3cp%3eAfter%20a%20lot%20of%20different%20attempts%20now%20it%20seems%20that%20I%26rsquo%3bm%20able%20to%20run%20a%20static%0ablog%20with%20Python%2c%20Nikola%20and%20Git.%3c%2fp%3e%0a}&source=Post%20It%21" target="_blank"><i class="fa fa-linkedin"><span>Share on LinkedIn</span></i></a>
	<a class="share-button-twitter" onClick="return popupShare(this.href);" href="http://twitter.com/share?text=Blogging%20with%20Nikola%20%2b%20Ipython%20%2b%20Git%28Hub%29&url=http%3a%2f%2fbrunettoziosi.eu%2fposts%2fblogging-with-nikola-ipython-github%2f" target="_blank"><i class="fa fa-twitter"><span>Tweet</span></i></a>	
</div>
		    

			
				<div class="tags-list">
					<span class="dark-red">Tags</span><span class="decorative-marker">//</span>
					
	                <a class="post-tag post-tag-nikola" href="http://brunettoziosi.eu/tags/nikola">Nikola</a>,
	                
	                <a class="post-tag post-tag-ipython" href="http://brunettoziosi.eu/tags/ipython">iPython</a>,
	                
	                <a class="post-tag post-tag-guthub-pages" href="http://brunettoziosi.eu/tags/guthub-pages">GutHub Pages</a>,
	                
	                <a class="post-tag post-tag-blogging" href="http://brunettoziosi.eu/tags/blogging">blogging</a>,
	                
	                <a class="post-tag post-tag-nerding" href="http://brunettoziosi.eu/tags/nerding">nerding</a>,
	                
				</div>
			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/posts/nvidia-drivers/">Nvidia drivers</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/pages/personal/my-favourite-phd-comics/">My favourite PhD Comics</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>
	<p>&copy; 2015 
	<a href="https://plus.google.com/117554238100031566866?rel=author">Brunetto Ziosi</a>. All rights reserved. </br>
	Theme by <a href="https://github.com/tmaiaroto/hugo-redlounge">Tom Maiaroto</a></p>
</div>
    </div>
  </div>
	

	
		<script type="text/javascript">
			function popupShare(url) {
				window.open(url, '_blank', 'scrollbars,resizable,height=525,width=600');
				return false;
			}
		</script>
	

  
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>
    <script type="text/javascript">
    
    MathJax.Hub.Config({
      tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
      }
    });
    MathJax.Hub.Queue(function() {
      $(MathJax.Hub.getAllJax()).map(function(index, elem) {
        return(elem.SourceElement());
      }).parent().addClass('has-jax');
    });
    MathJax.Hub.Configured();
    </script>
</body>
</html>